<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="RBlog">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="RBlog">
<meta property="article:author" content="Ryan">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/3/"/>





  <title>RBlog</title>
  








<meta name="generator" content="Hexo 4.2.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RBlog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            日程表
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/01/6.%E7%AE%97%E6%B3%95%E5%B7%A5%E7%A8%8B%E5%B8%88/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/5.NLP/NLP%E6%80%BB%E8%A7%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ryan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/01/6.%E7%AE%97%E6%B3%95%E5%B7%A5%E7%A8%8B%E5%B8%88/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/5.NLP/NLP%E6%80%BB%E8%A7%88/" itemprop="url">NLP总览</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-01T17:21:13+08:00">
                2020-06-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index">
                    <span itemprop="name">NLP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ryan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/" itemprop="url">EA建模初步使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-31T21:12:03+08:00">
                2020-05-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UML/" itemprop="url" rel="index">
                    <span itemprop="name">UML</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UML/EA/" itemprop="url" rel="index">
                    <span itemprop="name">EA</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="新建一个项目">新建一个项目</h2>
<h3 id="模型向导">模型向导</h3>
<p><img src="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/image-20200531222844900.png" alt="image-20200531222844900" style="zoom: 67%;"></p>
<ul>
<li>Use Case（用例图）: System behavior described with Use Cases and Actors.</li>
<li>Domain Model: Domain specific objects and their relationships.</li>
<li>Class（类图）: Type hierarchies, relationships and abstractions.</li>
<li>Component（组件）: Software artificates and components.</li>
<li>Deployment（部署）: Physical hardware, clients and network topologies.</li>
</ul>
<h3 id="toolbox">ToolBox</h3>
<p><img src="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/image-20200531233808738.png" alt="image-20200531233808738" style="zoom:80%;"></p>
<p>通过工具箱添加内容，从更多的工具中选取其他的工具，例如profile</p>
<h2 id="create-a-profile-package">Create a Profile Package</h2>
<blockquote>
<p>Profiles将stereotypes、tagged values(标记值)和constraints(约束)应用于具体的模型元素比如类、属性、操作和活动。一个Profile对象就是一系列为特定领域(比如，航空航天、保健、金融)或平台(J2EE、.NET)自定义的UML集合。</p>
<p><strong>profile 作用</strong>：帮助你分析并发现程序运行的瓶颈，找到耗时所在，同时也能帮助你发现不会被执行的代码。从而最终实现程序的优化。</p>
</blockquote>
<p><a href="https://www.uml-diagrams.org/profile.html" target="_blank" rel="noopener">UML Profile</a></p>
<p><a href="https://sparxsystems.com/enterprise_architect_user_guide/14.0/modeling_tools/createprofile.html" target="_blank" rel="noopener">Create a Profile Package</a></p>
<p>在包中新建Package diagram：</p>
<div class="figure">
<img src="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/image-20200601140344602.png" alt="image-20200601140344602">
<p class="caption">image-20200601140344602</p>
</div>
<div class="figure">
<img src="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/image-20200601140211450.png" alt="image-20200601140211450">
<p class="caption">image-20200601140211450</p>
</div>
<p>建完后，FirstPackage目录下的Class Model内容如下：</p>
<div class="figure">
<img src="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/image-20200601140652981.png" alt="image-20200601140652981">
<p class="caption">image-20200601140652981</p>
</div>
<p>然后可以在新建的profile中建模：</p>
<div class="figure">
<img src="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/image-20200601140329778.png" alt="image-20200601140329778">
<p class="caption">image-20200601140329778</p>
</div>
<h2 id="add-metaclasses-and-stereotypes-to-a-profile">Add Metaclasses and Stereotypes to a Profile</h2>
<p><a href="https://sparxsystems.com/enterprise_architect_user_guide/14.0/modeling_tools/addingelementsandmetaclass.html" target="_blank" rel="noopener">Add Stereotypes and Metaclasses</a></p>
<p><a href="https://www.uml-diagrams.org/stereotype.html" target="_blank" rel="noopener">UML Stereotype</a></p>
<p><a href="https://www.uml-diagrams.org/profile-metaclass.html" target="_blank" rel="noopener">UML Profile Metaclass</a></p>
<p>When you are extending the UML to develop a domain-specific toolset, you start by creating a Profile Package for the stereotypes you intend to customize. This Package has at least one child Class diagram, and it is on this child diagram that you specify:</p>
<ul>
<li>The types of object that you are extending, represented by Metaclass elements, and</li>
<li>The way in which each object is extended, represented by Stereotype elements</li>
</ul>
<p>You can qualify the effect of a Stereotype on a Metaclass using a range of other tools, including:</p>
<ul>
<li>Shape Scripts in the Stereotype</li>
<li><strong>Tagged Values</strong>, defined by attributes in the Stereotype element</li>
<li>Structured <strong>Tagged Value</strong> Classes, defined using attributes in the Stereotype element</li>
<li>Enumerations, defined using attributes in the Stereotype element</li>
<li>Tagged Value connectors, to identify possible values for a Tagged Value in an element generated with a Stereotype</li>
<li>Constraints on the Stereotype element</li>
<li>Special attributes, that define specific default behavior of stereotyped elements, such as the initial size and color of the element</li>
<li>Modifying the default appearance of the Stereotype element</li>
</ul>
<p>一个MetaClass与Stereotype的例子：</p>
<p><img src="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/image-20200601150015744.png" alt="image-20200601150015744" style="zoom:67%;"></p>
<h2 id="define-stereotype-tagged-values">Define Stereotype Tagged Values</h2>
<p><a href="https://sparxsystems.com/enterprise_architect_user_guide/14.0/modeling_tools/definestereotypetags.html" target="_blank" rel="noopener">Define Stereotype Tagged Values</a></p>
<p>向构造型中添加属性，操作方式如下（或者先选中Stereotype然后按F9）：</p>
<p><img src="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/image-20200601150918319.png" alt="image-20200601150918319" style="zoom:80%;"></p>
<p><img src="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/image-20200601151146745.png" alt="image-20200601151146745" style="zoom: 67%;"></p>
<p>添加完毕后：</p>
<div class="figure">
<img src="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/image-20200601151232801.png" alt="image-20200601151232801">
<p class="caption">image-20200601151232801</p>
</div>
<h2 id="add-shape-scripts">Add Shape Scripts</h2>
<p><a href="https://sparxsystems.com/enterprise_architect_user_guide/14.0/modeling_tools/add_shape_scripts_to_uml_profi.html" target="_blank" rel="noopener">Add Shape Scripts</a></p>
<p><a href="https://sparxsystems.com/enterprise_architect_user_guide/14.0/modeling_tools/shape_editor_2.html" target="_blank" rel="noopener">Shape Scripts</a></p>
<p><img src="/2020/05/31/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1/EA%E5%BB%BA%E6%A8%A1%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/image-20200601152810544.png" alt="image-20200601152810544" style="zoom: 67%;"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/27/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/ArcGIS/%E5%9F%BA%E4%BA%8EArcGIS%E7%9A%84%E5%9C%B0%E5%9B%BE%E5%B0%8F%E7%A8%8B%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ryan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/27/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/ArcGIS/%E5%9F%BA%E4%BA%8EArcGIS%E7%9A%84%E5%9C%B0%E5%9B%BE%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="url">基于ArcGIS的地图小程序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-27T23:20:21+08:00">
                2020-05-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/" itemprop="url" rel="index">
                    <span itemprop="name">Qt</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/" itemprop="url" rel="index">
                    <span itemprop="name">编程示例</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/ArcGIS/" itemprop="url" rel="index">
                    <span itemprop="name">ArcGIS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="最终效果">最终效果</h2>
<div class="figure">
<img src="/2020/05/27/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/ArcGIS/%E5%9F%BA%E4%BA%8EArcGIS%E7%9A%84%E5%9C%B0%E5%9B%BE%E5%B0%8F%E7%A8%8B%E5%BA%8F/demo.gif" alt="demo">
<p class="caption">demo</p>
</div>
<h2 id="加载地图">加载地图</h2>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">Map</span> &#123;</span><br><span class="line">	<span class="attribute">id:</span><span class="string"> map</span></span><br><span class="line">    <span class="comment">// set the basemap</span></span><br><span class="line">    <span class="title">Basemap</span> &#123;</span><br><span class="line">    	<span class="title">RasterLayer</span> &#123;</span><br><span class="line">        	<span class="title">Raster</span> &#123;</span><br><span class="line">            	<span class="attribute">path</span>: <span class="string">"file:///G:/Qt/map/map_file/地图_墨卡托坐标系.tif"</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="map">Map</h3>
<p><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html" target="_blank" rel="noopener">Map QML Type</a></p>
<blockquote>
<p>A map represents the model in an MVC architecture and a map view represents the view. A map specifies how the geographic data is organized, and a map view renders the data and allows users to interact with it.</p>
<p>A map derives its geographic content from its basemap and operational layers. A basemap provides a geographical context for the content you want to display on the map. It is a background locational reference where you can overlay your operational layers. The basemap content is typically geographic features that do not change frequently, such as streets, parcel boundaries, or rivers. Operational layers provide application content for the task at hand. Their content might change frequently with updates from earthquake, traffic, or weather reports.</p>
<p>The map has a spatial reference that specifies how the geographic content from its basemap and operational layers are aligned when combined together. The first layer that is added to the map will set the spatial reference.</p>
<p>Once the map's spatial reference is set, it cannot be changed, even by changing the basemap.</p>
<p>You can initialize the map in several different ways: creating from an <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-arcgisitem.html" target="_blank" rel="noopener">ArcGISItem</a> (a web map); a URL to a <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-arcgisitem.html#portalitem" target="_blank" rel="noopener">PortalItem</a>, creating from a basemap (either your own, or an Esri-provided basemap); or by defining the spatial reference. Each method of initialization is mutually exclusive. For example, you should not set both the item and <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#basemap-prop" target="_blank" rel="noopener">basemap</a> properties. Doing so will print a warning message at the console.</p>
<p>In the event that any combination of <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#item-prop" target="_blank" rel="noopener">item</a>, <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#initUrl-prop" target="_blank" rel="noopener">initUrl</a>, <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#basemap-prop" target="_blank" rel="noopener">basemap</a>, and <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#spatialReference-prop" target="_blank" rel="noopener">spatialReference</a> properties are set when the map initializes, the software chooses how to initialize the map depending on which properties are set. The precedence order for these properties is as follows.</p>
<ul>
<li>1: <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#item-prop" target="_blank" rel="noopener">item</a></li>
<li>2: <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#initUrl-prop" target="_blank" rel="noopener">initUrl</a></li>
<li>3: <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#basemap-prop" target="_blank" rel="noopener">basemap</a></li>
<li>4: <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#spatialReference-prop" target="_blank" rel="noopener">spatialReference</a></li>
</ul>
<p>The <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#spatialReference-prop" target="_blank" rel="noopener">spatialReference</a>, <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#initUrl-prop" target="_blank" rel="noopener">initUrl</a> and <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-map.html#item-prop" target="_blank" rel="noopener">item</a> properties can only be set at map initialization time. For example, if a map is created using a basemap, and later the item property is set in a JavaScript function, nothing will happen because the map was already initialized with the basemap.</p>
</blockquote>
<h3 id="rasterlayer">RasterLayer</h3>
<p><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-rasterlayer.html" target="_blank" rel="noopener">RasterLayer QML Type</a></p>
<blockquote>
<p>A <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-rasterlayer.html" target="_blank" rel="noopener">RasterLayer</a> is used to render data from a <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-raster.html" target="_blank" rel="noopener">Raster</a> onto a Map.</p>
</blockquote>
<h3 id="raster">Raster</h3>
<p><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-raster.html" target="_blank" rel="noopener">Raster QML Type</a></p>
<blockquote>
<p>A raster consists of a matrix of cells (or pixels) organized into rows and columns (or a grid) where each cell contains a value representing information, such as temperature. Rasters are digital aerial photographs, imagery from satellites, digital pictures, or even scanned maps.</p>
<p>It can be created from a raster file on device or from a raster function.</p>
<p>Supported Raster formats include:</p>
<ul>
<li>ASRP/USRP</li>
<li>CIB1, 5, 10</li>
<li>DTED0, 1, 2</li>
<li>GeoTIFF</li>
<li>HFA</li>
<li>HRE</li>
<li>IMG</li>
<li>JPEG</li>
<li>JPEG 2000</li>
<li>NITF</li>
<li>PNG</li>
<li>RPF</li>
<li>SRTM1, 2</li>
<li>Mosaic Dataset in SQLite (read-only)</li>
</ul>
<p>Learn more about rasters from the <a href="http://links.esri.com/qt/rasters" target="_blank" rel="noopener">ArcGIS Desktop documentation</a>.</p>
</blockquote>
<h2 id="标记">标记</h2>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">GraphicsOverlay</span> &#123;</span><br><span class="line">    <span class="attribute">id:</span><span class="string"> graphicsOverlay</span></span><br><span class="line">    <span class="comment">// assign a render to the graphics overlay</span></span><br><span class="line">    <span class="title">SimpleRenderer</span> &#123;</span><br><span class="line">        <span class="title">SimpleMarkerSymbol</span> &#123;</span><br><span class="line">            <span class="attribute">style</span>: Enums.SimpleMarkerSymbolStyleX</span><br><span class="line">            <span class="attribute">color</span>: Qt.rgba(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>)</span><br><span class="line">            <span class="attribute">size</span>: <span class="number">15.0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title">Graphic</span> &#123;</span><br><span class="line">        <span class="attribute">id:</span><span class="string"> locationGraphic</span></span><br><span class="line">        <span class="title">Point</span> &#123;</span><br><span class="line">            <span class="attribute">x</span>: <span class="number">-117.195</span></span><br><span class="line">            <span class="attribute">y</span>: <span class="number">34.056195</span></span><br><span class="line">            <span class="title">SpatialReference</span> &#123;</span><br><span class="line">                <span class="attribute">wkid</span>: <span class="number">4326</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">onComponentCompleted</span>: &#123;</span><br><span class="line">            setTextFromPoint(locationGraphic.geometry);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="graphicsoverlay">GraphicsOverlay</h3>
<p><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-graphicsoverlay.html" target="_blank" rel="noopener">GraphicsOverlay QML Type</a></p>
<blockquote>
<p>Graphics may represent temporary data in your application, such as the results of a query or an analysis, or may be used to highlight existing content in the map.</p>
<p>Each graphic contains a geometry describing the location and the shape of the graphic. A graphics overlay typically contains graphics based on a single geometry type (Point, Multipoint, Polyline, or Polygon). Each graphic can be associated with a symbol which controls how the graphic looks. Alternatively, the overlay can be associated with a renderer which manages the appearance of all the graphics in the overlay that do not have specific symbols associate with each of them.</p>
</blockquote>
<h3 id="simplerenderer">SimpleRenderer</h3>
<p><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-simplerenderer.html" target="_blank" rel="noopener">SimpleRenderer QML Type</a></p>
<blockquote>
<p>Simple renderers symbolize all graphics in a graphics overlay or features in a feature layer according to a given scheme. Simple renderers use a simple scheme, meaning the same symbol is used for all graphics and features, regardless of their attribute values.</p>
</blockquote>
<h3 id="simplemarkersymbol">SimpleMarkerSymbol</h3>
<p><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-simplemarkersymbol.html" target="_blank" rel="noopener">SimpleMarkerSymbol QML Type</a></p>
<blockquote>
<p>Symbols describe how graphics and features look on a map. Different symbols are used with different geometry types. Instances of this type represent simple marker symbols. Marker symbols are used to display those graphics and features which are based on point or multipoint geometry. Simple marker symbols display simple, predefined markers such as circle, cross, and so on. In addition, the markers can have an optional outline, which is defined by a line symbol.</p>
</blockquote>
<h3 id="graphic">Graphic</h3>
<p><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-graphic.html" target="_blank" rel="noopener">Graphic QML Type</a></p>
<blockquote>
<p>Graphics are displayed on the map through a graphics overlay. Common uses of graphics include providing input to a task, displaying output from a task, or <strong>marking a location based on user interaction with the map</strong>.</p>
<p>Each graphic must contain a geometry describing the location and the shape of the graphic. The geometry preferably should be in the same spatial reference as the map, otherwise it will be reprojected on-the-fly (computationally expensive for large number of graphics).</p>
<p>A graphic can be associated with a symbol which determines how the graphic looks. Alternatively, the graphics overlay can be assigned a renderer which determines the appearance of all graphics in the overlay. If the graphic has an associated symbol, that symbol will override the renderer when displaying that graphic. The symbol used depends upon the geometry type associated with the graphic. A <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-markersymbol.html" target="_blank" rel="noopener">MarkerSymbol</a> is used for point and multipoint geometries, <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-linesymbol.html" target="_blank" rel="noopener">LineSymbol</a> for polyline geometries, and <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-fillsymbol.html" target="_blank" rel="noopener">FillSymbol</a> for polygon geometries.</p>
<p>A graphic can contain a list model of attributes (key-value pairs) providing more information about the graphic.</p>
</blockquote>
<p>Properties：</p>
<ul>
<li><strong><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-graphic.html#attributes-prop" target="_blank" rel="noopener">attributes</a></strong> : AttributeListModel</li>
<li><strong><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-graphic.html#geometry-prop" target="_blank" rel="noopener">geometry</a></strong> : Geometry</li>
<li><strong><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-graphic.html#graphicsOverlay-prop" target="_blank" rel="noopener">graphicsOverlay</a></strong> : GraphicsOverlay</li>
<li><strong><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-graphic.html#selected-prop" target="_blank" rel="noopener">selected</a></strong> : bool</li>
<li><strong><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-graphic.html#symbol-prop" target="_blank" rel="noopener">symbol</a></strong> : Symbol</li>
<li><strong><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-graphic.html#visible-prop" target="_blank" rel="noopener">visible</a></strong> : bool</li>
<li><strong><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-graphic.html#zIndex-prop" target="_blank" rel="noopener">zIndex</a></strong> : int</li>
</ul>
<h3 id="geometry">Geometry</h3>
<p><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-geometry.html" target="_blank" rel="noopener">Geometry QML Type</a></p>
<blockquote>
<p><strong>Note:</strong> You cannot declare or create a component of this type in QML code.</p>
<p>This type is the base type for two-dimensional (x,y) or three-dimensional (x,y,z) geometries such as Point and Polyline objects. Objects that inherit from the Geometry type may also include an m (measure) value for each vertex.</p>
<p>Geometries are used throughout the API, for example to define the shape of a feature or graphic, the extent of a layer, or as inputs and outputs of different types of task.</p>
</blockquote>
<h3 id="point">Point</h3>
<p><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-point.html" target="_blank" rel="noopener">Point QML Type</a></p>
<blockquote>
<p>Points can optionally have z (height) and m (measure) attributes.</p>
<p>If the <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-spatialreference.html" target="_blank" rel="noopener">SpatialReference</a> is a geographic coordinate system, the x-coordinate defines <strong>longitude</strong> and the y-coordinate defines <strong>latitude</strong>.</p>
<p>Point is immutable. Instead of changing the properties of an existing Point, create new Point instances, or use <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-pointbuilder.html" target="_blank" rel="noopener">PointBuilder</a>.</p>
<p><strong>Points can be used as the Geometry of a Feature.</strong></p>
</blockquote>
<h3 id="spatialreference">SpatialReference</h3>
<p><a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-spatialreference.html" target="_blank" rel="noopener">SpatialReference QML Type</a></p>
<blockquote>
<p>Instances of this type represent a specific coordinate system, identified by a well-known ID (WKID) number or well-known text (WKT) string. SpatialReferences are immutable.</p>
<p>SpatialReferences allow disparate spatial data to be consistently viewed and analyzed together. Geometry, Layer, and <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-graphicsoverlay.html" target="_blank" rel="noopener">GraphicsOverlay</a> types have a <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-spatialreference.html" target="_blank" rel="noopener">SpatialReference</a> that determines the system in which the data is stored, and the <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-spatialreference.html" target="_blank" rel="noopener">SpatialReference</a> of each <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-geoview.html" target="_blank" rel="noopener">GeoView</a> determines how it displays the data it contains. There are two main categories of coordinate system that can be represented by a <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-spatialreference.html" target="_blank" rel="noopener">SpatialReference</a>:</p>
<ul>
<li>Geographic coordinate systems use a three-dimensional spherical surface to define locations on the earth. Coordinates are defined using angular units such as degrees.</li>
<li>Projected coordinate systems use flat, two-dimensional surface to define locations on the earth. Coordinates are defined using linear units such as meters or miles.</li>
</ul>
<p>In some cases, more than one WKID value refer to the same spatial reference. For example, 3857 and 102100 both refer to WGS 1984 Web Mercator (Auxiliary Sphere). There can also be subtle differences between two WKT strings that that represent the same spatial reference. To mitigate this situation, the <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-spatialreference.html" target="_blank" rel="noopener">SpatialReference</a> type provides spatial reference comparison methods.</p>
<p>Use the create method to create a <a href="https://developers.arcgis.com/qt/latest/qml/api-reference/qml-esri-arcgisruntime-spatialreference.html" target="_blank" rel="noopener">SpatialReference</a> by specifying the WKID of a coordinate system, or use the members of SpatialReferences to return instances of the most commonly used SpatialReferences.</p>
<p>See <a href="http://resources.arcgis.com/en/help/arcgis-rest-api/index.html#/Projected_coordinate_systems/02r3000000vt000000/" target="_blank" rel="noopener">Projected Coordinate Systems</a> and <a href="http://resources.arcgis.com/en/help/arcgis-rest-api/index.html#/Geographic_coordinate_systems/02r300000105000000/" target="_blank" rel="noopener">Geographic Coordinate Systems</a> for the list of supported spatial references and their corresponding definition strings.</p>
</blockquote>
<h2 id="other-references">Other References</h2>
<ul>
<li><a href="https://developers.arcgis.com/qt/latest/qml/guide/add-raster-data.htm" target="_blank" rel="noopener">Add raster data</a></li>
<li><a href="https://developers.arcgis.com/qt/latest/qml/sample-code/format-coordinates/" target="_blank" rel="noopener">Format coordinates</a></li>
</ul>
<h2 id="代码实现">代码实现</h2>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">Rectangle</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">800</span></span><br><span class="line">    </span><br><span class="line">    readonly <span class="keyword">property</span><span class="string"> int labelWidth</span>: <span class="number">100</span></span><br><span class="line">    readonly <span class="keyword">property</span><span class="string"> int coordinateTextWidth</span>: <span class="number">200</span></span><br><span class="line">    readonly <span class="keyword">property</span><span class="string"> int fontPixelSize</span>: <span class="number">14</span></span><br><span class="line">    readonly <span class="keyword">property</span><span class="string"> int textPadding</span>: <span class="number">4</span></span><br><span class="line">    readonly <span class="keyword">property</span><span class="string"> string strDecimalDegrees</span>: qsTr(<span class="string">"Degrees"</span>)</span><br><span class="line">    readonly <span class="keyword">property</span><span class="string"> string strDegreesMinutesSeconds</span>: qsTr(<span class="string">"DMS"</span>)</span><br><span class="line">    <span class="keyword">property</span><span class="string"> string labelSuffix</span>: <span class="string">":  "</span></span><br><span class="line"></span><br><span class="line">    <span class="title">MapView</span> &#123;</span><br><span class="line">        <span class="attribute">id:</span><span class="string"> mapView</span></span><br><span class="line"></span><br><span class="line">        <span class="title">anchors</span> &#123;</span><br><span class="line">            <span class="attribute">top</span>: <span class="built_in">parent</span>.top</span><br><span class="line">            <span class="attribute">left</span>: <span class="built_in">parent</span>.left</span><br><span class="line">            <span class="attribute">right</span>: <span class="built_in">parent</span>.right</span><br><span class="line">            <span class="attribute">bottom</span>: formatRect.top</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title">Map</span> &#123;</span><br><span class="line">            <span class="attribute">id:</span><span class="string"> map</span></span><br><span class="line">            <span class="comment">// set the basemap</span></span><br><span class="line">            <span class="title">Basemap</span> &#123;</span><br><span class="line">                <span class="title">RasterLayer</span> &#123;</span><br><span class="line">                   <span class="title">Raster</span> &#123;</span><br><span class="line">                       <span class="attribute">path</span>: <span class="string">"file:///G:/Qt/map/map_file/地图_墨卡托坐标系.tif"</span></span><br><span class="line">                   &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Add a graphics overlay to the map view</span></span><br><span class="line">        <span class="title">GraphicsOverlay</span> &#123;</span><br><span class="line">            <span class="attribute">id:</span><span class="string"> graphicsOverlay</span></span><br><span class="line">            <span class="comment">// assign a render to the graphics overlay</span></span><br><span class="line">            <span class="title">SimpleRenderer</span> &#123;</span><br><span class="line">                <span class="title">SimpleMarkerSymbol</span> &#123;</span><br><span class="line">                    <span class="attribute">style</span>: Enums.SimpleMarkerSymbolStyleX</span><br><span class="line">                    <span class="attribute">color</span>: Qt.rgba(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>)</span><br><span class="line">                    <span class="attribute">size</span>: <span class="number">15.0</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="title">Graphic</span> &#123;</span><br><span class="line">                <span class="attribute">id:</span><span class="string"> locationGraphic</span></span><br><span class="line">                <span class="title">Point</span> &#123;</span><br><span class="line">                    <span class="attribute">x</span>: <span class="number">12148289.779419606551528</span></span><br><span class="line">                    <span class="attribute">y</span>: <span class="number">2081791.129232412204146</span></span><br><span class="line">                    <span class="title">SpatialReference</span> &#123;</span><br><span class="line">                        <span class="attribute">wkid</span>: <span class="number">3857</span>  <span class="comment">// Web墨卡托坐标系</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="attribute">onComponentCompleted</span>: &#123;</span><br><span class="line">                    setTextFromPoint(locationGraphic.geometry);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">onMouseClicked</span>: &#123;  <span class="comment">// on MapView</span></span><br><span class="line">            handleLocationUpdate(mouse.mapPoint);   </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title">Rectangle</span> &#123;</span><br><span class="line">        <span class="attribute">id:</span><span class="string"> formatRect</span></span><br><span class="line">        <span class="title">anchors</span> &#123;</span><br><span class="line">            <span class="attribute">left</span>: <span class="built_in">parent</span>.left</span><br><span class="line">            <span class="attribute">bottom</span>: <span class="built_in">parent</span>.bottom</span><br><span class="line">            <span class="attribute">right</span>: <span class="built_in">parent</span>.right</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">height</span>: childrenRect.height</span><br><span class="line"></span><br><span class="line">        <span class="title">GridLayout</span> &#123;</span><br><span class="line">            <span class="attribute">columns</span>: <span class="number">2</span></span><br><span class="line">            <span class="attribute">width</span>: <span class="built_in">parent</span>.width</span><br><span class="line">            <span class="title">Text</span> &#123;</span><br><span class="line">                <span class="attribute">id:</span><span class="string"> labelDD</span></span><br><span class="line">                <span class="attribute">font.pixelSize</span>: fontPixelSize</span><br><span class="line">                <span class="attribute">padding</span>: textPadding</span><br><span class="line">                <span class="attribute">horizontalAlignment</span>: Text.AlignRight</span><br><span class="line">                <span class="attribute">text</span>: strDecimalDegrees + labelSuffix</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="title">TextField</span> &#123;</span><br><span class="line">                <span class="attribute">id:</span><span class="string"> textDD</span></span><br><span class="line">                <span class="attribute">font.pixelSize</span>: fontPixelSize</span><br><span class="line">                <span class="attribute">text</span>: coordinatesInDD.length === <span class="number">0</span> ? <span class="string">"invalid point"</span> : coordinatesInDD</span><br><span class="line">                <span class="attribute">Layout.fillWidth</span>: <span class="literal">true</span></span><br><span class="line">                <span class="attribute">onAccepted</span>: &#123;</span><br><span class="line">                    handleTextUpdate(strDecimalDegrees, text);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="title">Text</span> &#123;</span><br><span class="line">                <span class="attribute">id:</span><span class="string"> labelDMS</span></span><br><span class="line">                <span class="attribute">font.pixelSize</span>: fontPixelSize</span><br><span class="line">                <span class="attribute">padding</span>: textPadding</span><br><span class="line">                <span class="attribute">horizontalAlignment</span>: Text.AlignRight</span><br><span class="line">                <span class="attribute">text</span>: strDegreesMinutesSeconds + labelSuffix</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="title">TextField</span> &#123;</span><br><span class="line">                <span class="attribute">id:</span><span class="string"> textDMS</span></span><br><span class="line">                <span class="attribute">font.pixelSize</span>: fontPixelSize</span><br><span class="line">                <span class="attribute">text</span>: coordinatesInDMS.length === <span class="number">0</span> ? <span class="string">"invalid point"</span> : coordinatesInDMS</span><br><span class="line">                <span class="attribute">Layout.fillWidth</span>: <span class="literal">true</span></span><br><span class="line">                <span class="attribute">onAccepted</span>: &#123;</span><br><span class="line">                    handleTextUpdate(strDegreesMinutesSeconds, text);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleLocationUpdate</span>(<span class="params">point</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">point</span>.isEmpty)</span><br><span class="line">        &#123;</span><br><span class="line">            locationGraphic.geometry = <span class="built_in">point</span>;</span><br><span class="line">            setTextFromPoint(<span class="built_in">point</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setTextFromPoint</span>(<span class="params">point</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">point</span>.isEmpty) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">//! [FormatCoordinates CoordinateFormatter point to text]</span></span><br><span class="line">        <span class="keyword">var</span> decimalPlaces = <span class="number">6</span>;</span><br><span class="line">        textDD.text   = CoordinateFormatter.toLatitudeLongitude(</span><br><span class="line">                    <span class="built_in">point</span>, Enums.LatitudeLongitudeFormatDecimalDegrees, decimalPlaces);</span><br><span class="line">        textDMS.text  = CoordinateFormatter.toLatitudeLongitude(</span><br><span class="line">                    <span class="built_in">point</span>, Enums.LatitudeLongitudeFormatDegreesMinutesSeconds, decimalPlaces);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// check for invalid points and update the text boxes</span></span><br><span class="line">        textDD.text = textDD.text.length === <span class="number">0</span>? <span class="string">"invalid point"</span>: textDD.text;</span><br><span class="line">        textDMS.text = textDMS.text.length === <span class="number">0</span>? <span class="string">"invalid point"</span>: textDMS.text;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleTextUpdate</span>(<span class="params">textType, text</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="built_in">point</span> = createPointFromText(textType, text);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">point</span>)</span><br><span class="line">            handleLocationUpdate(<span class="built_in">point</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createPointFromText</span>(<span class="params">textType, text</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//! [FormatCoordinates CoordinateFormatter text to point]</span></span><br><span class="line">        <span class="keyword">return</span> CoordinateFormatter.fromLatitudeLongitude(text, map.spatialReference);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/25/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/UML%E5%BB%BA%E6%A8%A1%E5%9F%BA%E6%9C%AC%E4%BA%86%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ryan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/25/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/UML%E5%BB%BA%E6%A8%A1%E5%9F%BA%E6%9C%AC%E4%BA%86%E8%A7%A3/" itemprop="url">UML建模基本了解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-25T11:22:05+08:00">
                2020-05-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UML/" itemprop="url" rel="index">
                    <span itemprop="name">UML</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="简介">简介</h2>
<p>Unified Modeling Language (UML)又称统一建模语言或标准建模语言，是始于1997年一个OMG标准，它是一个支持模型化和软件系统开发的图形化语言，为软件开发的所有阶段提供模型化和可视化支持，包括由需求分析到规格，到构造和配置。 面向对象的分析与设计(OOA&amp;D，OOAD)方法的发展在80年代末至90年代中出现了一个高潮，UML是这个高潮的产物。它不仅统一了Booch、Rumbaugh和Jacobson的表示方法，而且对其作了进一步的发展，并最终统一为大众所接受的标准建模语言。Grady Booch的描述对象集合和它们之间的关系的方法。James Rumbaugh的对象建模技术（OMT）。Ivar Jacobson的包括用例方法的方式。还有其他一些想法也对UML起到了作用，UML是Booch, Rumbaugh, Jacobson。UML已经被对象管理组织（OMG）接受为标准，这个组织还制定了通用对象请求代理体系结构（CORBA），是分布式对象编程行业的领头羊。计算机辅助软件工程（CASE）产品的供应商也支持UML，并且它基本上已经被所有的软件开发产品制造商所认可，这其中包括IBM和微软(用于它的VB环境)。UML规范用来描述建模的概念有，类（对象的）、对象、关联、职责、行为、接口、用例、包、顺序、协作，以及状态。</p>
<h2 id="uml-diagram-types">14 UML Diagram Types</h2>
<p><a href="https://creately.com/blog/diagrams/uml-diagram-types-examples/" target="_blank" rel="noopener">UML Diagram Types Guide: Learn About All Types of UML Diagrams with Examples</a></p>
<p><a href="https://www.uml-diagrams.org/uml-25-diagrams.html" target="_blank" rel="noopener">UML 2.5 Diagrams Overview</a></p>
<div class="figure">
<img src="/2020/05/25/3.%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/UML%E5%BB%BA%E6%A8%A1/UML%E5%BB%BA%E6%A8%A1%E5%9F%BA%E6%9C%AC%E4%BA%86%E8%A7%A3/uml-25-diagrams.png" alt="UML 2.5 Diagrams Taxonomy.">
<p class="caption">UML 2.5 Diagrams Taxonomy.</p>
</div>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/23/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E5%B0%86%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84cpp%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%86%8C%E5%88%B0qml%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B8%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ryan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/23/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E5%B0%86%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84cpp%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%86%8C%E5%88%B0qml%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B8%AD/" itemprop="url">将自定义的cpp类型注册到qml类型系统中</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-23T16:57:24+08:00">
                2020-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/" itemprop="url" rel="index">
                    <span itemprop="name">Qt</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/" itemprop="url" rel="index">
                    <span itemprop="name">编程示例</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" itemprop="url" rel="index">
                    <span itemprop="name">基本使用</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="registering-c-types-with-the-qml-type-system">Registering C++ Types with the QML Type System</h2>
<p>A <a href="https://doc.qt.io/qt-5/qobject.html" target="_blank" rel="noopener">QObject</a>-derived class can be registered with the QML type system to enable the type to be used as a data type from within QML code.</p>
<p>The engine allows the registration of both <strong>instantiable</strong> and <strong>non-instantiable</strong> types. Registering an instantiable type enables a C++ class to be <strong>used as the definition of a QML object type</strong>, allowing it to be used in object declarations from QML code to create objects of this type. Registration also provides the engine with additional type metadata, enabling the type (and any enums declared by the class) to be <strong>used as a data type for property values, method parameters and return values, and signal parameters that are exchanged between QML and C++</strong>.</p>
<p>Registering a non-instantiable type also registers the class as a data type in this manner, but the type cannot be used instantiated as a QML object type from QML. This is useful, for example, if a type has enums that should be exposed to QML but the type itself should not be instantiable.</p>
<p>For a quick guide to choosing the correct approach to expose C++ types to QML, see <a href="https://doc.qt.io/qt-5/qtqml-cppintegration-overview.html#choosing-the-correct-integration-method-between-c-and-qml" target="_blank" rel="noopener">Choosing the Correct Integration Method Between C++ and QML</a>.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://doc.qt.io/qt-5/qtqml-cppintegration-definetypes.html" target="_blank" rel="noopener">Defining QML Types from C++</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/23/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E5%9F%BA%E4%BA%8ETCP%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84CS%E6%9E%B6%E6%9E%84%E7%9A%84%E5%8A%A0%E6%B3%95%E8%AE%A1%E7%AE%97%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ryan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/23/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E5%9F%BA%E4%BA%8ETCP%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84CS%E6%9E%B6%E6%9E%84%E7%9A%84%E5%8A%A0%E6%B3%95%E8%AE%A1%E7%AE%97%E5%99%A8/" itemprop="url">基于TCP套接字的CS架构的加法计算器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-23T09:23:40+08:00">
                2020-05-23
              </time>
            

            

            
          </span>

          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="功能设计">功能设计</h2>
<h3 id="客户端">客户端</h3>
<h3 id="服务端">服务端</h3>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/23/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E5%9F%BA%E4%BA%8ETCP%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84ClientServer%E6%B6%88%E6%81%AF%E4%BC%A0%E8%BE%93%E7%A8%8B%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ryan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/23/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E5%9F%BA%E4%BA%8ETCP%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84ClientServer%E6%B6%88%E6%81%AF%E4%BC%A0%E8%BE%93%E7%A8%8B%E5%BA%8F/" itemprop="url">基于TCP套接字的最简单的ClientServer消息传输程序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-23T02:12:04+08:00">
                2020-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/" itemprop="url" rel="index">
                    <span itemprop="name">Qt</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/" itemprop="url" rel="index">
                    <span itemprop="name">编程示例</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/web%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index">
                    <span itemprop="name">web编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="设计">设计</h2>
<p>分别实现一个client端和一个server端，client向server发送“Hello Server”，server收到client的信息后返回“Hello Client”。</p>
<h2 id="client实现">Client实现</h2>
<p>client.h代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CLIENT_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CLIENT_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QObject&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QTcpSocket&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> :</span> <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">Client</span><span class="params">(QObject *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sendMsg</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *msg)</span></span>;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">connected</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">receiveMsg</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QTcpSocket *socket;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// CLIENT_H</span></span></span><br></pre></td></tr></table></figure>
<p>client.cpp代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"client.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Client</span>::<span class="built_in">Client</span>(QObject *parent) : QObject(parent)</span><br><span class="line">&#123;</span><br><span class="line">    socket = <span class="keyword">new</span> QTcpSocket();</span><br><span class="line">    <span class="built_in">connect</span>(socket, &amp;QTcpSocket::<span class="built_in">connected</span>,<span class="keyword">this</span>, &amp;<span class="built_in">Client</span>::<span class="built_in">connected</span>);</span><br><span class="line">    <span class="built_in">connect</span>(socket, &amp;QTcpSocket::readyRead, <span class="keyword">this</span>, &amp;<span class="built_in">Client</span>::receiveMsg);</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"Try to connect host..."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    socket-&gt;connectToHost(<span class="string">"127.0.0.1"</span>, <span class="number">8100</span>, QTcpSocket::ReadWrite);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Client::sendMsg</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    socket-&gt;<span class="built_in">write</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Client::receiveMsg</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    qDebug() &lt;&lt; socket-&gt;readAll() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Client::connected</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"connected."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>main.cpp代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QGuiApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QQmlApplicationEngine&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"client.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);</span><br><span class="line"></span><br><span class="line">    <span class="function">QGuiApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    QQmlApplicationEngine engine;</span><br><span class="line">    <span class="function"><span class="keyword">const</span> QUrl <span class="title">url</span><span class="params">(QStringLiteral(<span class="string">"qrc:/main.qml"</span>))</span></span>;</span><br><span class="line">    QObject::<span class="built_in">connect</span>(&amp;engine, &amp;QQmlApplicationEngine::objectCreated,</span><br><span class="line">                     &amp;app, [url](QObject *obj, <span class="keyword">const</span> QUrl &amp;objUrl) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!obj &amp;&amp; url == objUrl)</span><br><span class="line">            QCoreApplication::<span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    &#125;, Qt::QueuedConnection);</span><br><span class="line">    engine.load(url);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Client</span> client;</span><br><span class="line">    client.sendMsg(<span class="string">"Hello Server."</span>);</span><br><span class="line"><span class="comment">//    client.receiveMsg();</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="server实现">Server实现</h2>
<p>server.h代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SERVER_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SERVER_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QObject&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QTcpSocket&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QTcpServer&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Server</span> :</span> <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">Server</span><span class="params">(QObject *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">newConnection</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">receiveMsg</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QTcpSocket *socket;</span><br><span class="line">    QTcpServer *server;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// SERVER_H</span></span></span><br></pre></td></tr></table></figure>
<p>server.cpp代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"server.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Server</span>::<span class="built_in">Server</span>(QObject *parent) : QObject(parent)</span><br><span class="line">&#123;</span><br><span class="line">    server = <span class="keyword">new</span> QTcpServer(<span class="keyword">this</span>);</span><br><span class="line">    <span class="built_in">connect</span>(server, &amp;QTcpServer::newConnection, <span class="keyword">this</span>, &amp;<span class="built_in">Server</span>::newConnection);</span><br><span class="line">    <span class="keyword">if</span>(!server-&gt;<span class="built_in">listen</span>(QHostAddress::Any, <span class="number">8100</span>)) &#123;</span><br><span class="line">        qDebug() &lt;&lt; <span class="string">"Can't listening on port 8100"</span> &lt;&lt; <span class="built_in">endl</span>;    <span class="comment">//错误信息</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        qDebug() &lt;&lt; <span class="string">"listening on port 8100..."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Server::newConnection</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"Waiting for connection..."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    socket = server-&gt;nextPendingConnection();</span><br><span class="line"><span class="comment">//    socket-&gt;setReadBufferSize(512);</span></span><br><span class="line">    <span class="built_in">connect</span>(socket, &amp;QTcpSocket::readyRead, <span class="keyword">this</span>, &amp;<span class="built_in">Server</span>::receiveMsg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Server::receiveMsg</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    qDebug() &lt;&lt; socket-&gt;readAll() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    socket-&gt;<span class="built_in">write</span>(<span class="string">"Hello Client."</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>main.cpp代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QGuiApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QQmlApplicationEngine&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"server.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);</span><br><span class="line"></span><br><span class="line">    <span class="function">QGuiApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    QQmlApplicationEngine engine;</span><br><span class="line">    <span class="function"><span class="keyword">const</span> QUrl <span class="title">url</span><span class="params">(QStringLiteral(<span class="string">"qrc:/main.qml"</span>))</span></span>;</span><br><span class="line">    QObject::<span class="built_in">connect</span>(&amp;engine, &amp;QQmlApplicationEngine::objectCreated,</span><br><span class="line">                     &amp;app, [url](QObject *obj, <span class="keyword">const</span> QUrl &amp;objUrl) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!obj &amp;&amp; url == objUrl)</span><br><span class="line">            QCoreApplication::<span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    &#125;, Qt::QueuedConnection);</span><br><span class="line">    engine.load(url);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Server</span> server;</span><br><span class="line">    server.newConnection();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="运行结果">运行结果</h2>
<p>client端：</p>
<div class="figure">
<img src="/2020/05/23/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E5%9F%BA%E4%BA%8ETCP%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84ClientServer%E6%B6%88%E6%81%AF%E4%BC%A0%E8%BE%93%E7%A8%8B%E5%BA%8F/image-20200523022240478.png" alt="image-20200523022240478">
<p class="caption">image-20200523022240478</p>
</div>
<p>server端：</p>
<div class="figure">
<img src="/2020/05/23/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E5%9F%BA%E4%BA%8ETCP%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84ClientServer%E6%B6%88%E6%81%AF%E4%BC%A0%E8%BE%93%E7%A8%8B%E5%BA%8F/image-20200523022227627.png" alt="image-20200523022227627">
<p class="caption">image-20200523022227627</p>
</div>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/22/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/QML/QML%E5%85%83%E7%B4%A0%E5%B8%83%E5%B1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ryan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/22/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/QML/QML%E5%85%83%E7%B4%A0%E5%B8%83%E5%B1%80/" itemprop="url">QML元素布局</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-22T16:30:51+08:00">
                2020-05-22
              </time>
            

            

            
          </span>

          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="利用绝对坐标">利用绝对坐标</h2>
<h2 id="利用gridlayout">利用GridLayout</h2>
<h2 id="利用anchor">利用anchor</h2>
<p><a href="https://doc.qt.io/qt-5/qtquick-positioning-anchors.html" target="_blank" rel="noopener">Positioning with Anchors</a></p>
<p><a href="https://doc-snapshots.qt.io/qt5-5.14/qtquicklayouts-overview.html" target="_blank" rel="noopener">Qt Quick Layouts Overview</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/22/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84CS%E6%9E%B6%E6%9E%84%E7%9A%84%E5%8A%A0%E6%B3%95%E8%AE%A1%E7%AE%97%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ryan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/22/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84CS%E6%9E%B6%E6%9E%84%E7%9A%84%E5%8A%A0%E6%B3%95%E8%AE%A1%E7%AE%97%E5%99%A8/" itemprop="url">一个简单的CS架构的加法计算器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-22T10:38:26+08:00">
                2020-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/" itemprop="url" rel="index">
                    <span itemprop="name">Qt</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/" itemprop="url" rel="index">
                    <span itemprop="name">编程示例</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" itemprop="url" rel="index">
                    <span itemprop="name">基本使用</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="设计">设计</h2>
<h3 id="架构与功能设计">架构与功能设计</h3>
<p>项目使用Client-Server架构，Client端输入需要相加的两个数传输到Server端，Server端进行计算然后向Client端返回结果。</p>
<h3 id="ui设计">UI设计</h3>
<div class="figure">
<img src="/2020/05/22/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84CS%E6%9E%B6%E6%9E%84%E7%9A%84%E5%8A%A0%E6%B3%95%E8%AE%A1%E7%AE%97%E5%99%A8/image-20200522191841391.png" alt="image-20200522191841391">
<p class="caption">image-20200522191841391</p>
</div>
<h2 id="client实现">Client实现</h2>
<p>Client.h文件内容如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CLIENT_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CLIENT_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QObject&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> :</span> <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">Client</span><span class="params">(QObject *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    <span class="function">Q_INVOKABLE <span class="keyword">void</span> <span class="title">setOperands</span><span class="params">(QString StrLeftOperand, QString StrRightOperand)</span></span>;</span><br><span class="line">    <span class="function">Q_INVOKABLE <span class="keyword">int</span> <span class="title">getSumedResult</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operandsChanged</span><span class="params">(<span class="keyword">int</span> leftOperand, <span class="keyword">int</span> rightOperand)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getResult</span><span class="params">(<span class="keyword">int</span> value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> leftOperand, rightOperand, result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// CLIENT_H</span></span></span><br></pre></td></tr></table></figure>
<p>Client.cpp文件内容如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"client.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Client</span>::<span class="built_in">Client</span>(QObject *parent) : QObject(parent)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Client::setOperands</span><span class="params">(QString StrLeftOperand, QString StrRightOperand)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> ok;</span><br><span class="line">    <span class="keyword">int</span> leftOperand = StrLeftOperand.toInt(&amp;ok, <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">int</span> rightOperand = StrRightOperand.toInt(&amp;ok, <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>-&gt;leftOperand != leftOperand || <span class="keyword">this</span>-&gt;rightOperand != rightOperand)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;leftOperand = leftOperand;</span><br><span class="line">        <span class="keyword">this</span>-&gt;rightOperand = rightOperand;</span><br><span class="line">        <span class="function">emit <span class="title">operandsChanged</span><span class="params">(leftOperand, rightOperand)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Client::getSumedResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Client::getResult</span><span class="params">(<span class="keyword">int</span> value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    result = value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="server实现">Server实现</h2>
<p>Server.h文件内容如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SERVER_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SERVER_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QObject&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Server</span> :</span> <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">Server</span><span class="params">(QObject *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">resultChanged</span><span class="params">(<span class="keyword">int</span> value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getOperands</span><span class="params">(<span class="keyword">int</span> leftOperand, <span class="keyword">int</span> rightOperand)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// SERVER_H</span></span></span><br></pre></td></tr></table></figure>
<p>Server.cpp文件内容如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"server.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Server</span>::<span class="built_in">Server</span>(QObject *parent) : QObject(parent)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Server::getOperands</span><span class="params">(<span class="keyword">int</span> leftOperand, <span class="keyword">int</span> rightOperand)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">emit <span class="title">resultChanged</span><span class="params">(leftOperand+rightOperand)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="qml文件">qml文件</h2>
<p>main.qml文件如下：</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> QtQuick <span class="number">2.12</span></span><br><span class="line"><span class="keyword">import</span> QtQuick.Window <span class="number">2.12</span></span><br><span class="line"><span class="keyword">import</span> QtQuick.Controls <span class="number">2.12</span></span><br><span class="line"></span><br><span class="line"><span class="title">Window</span> &#123;</span><br><span class="line">    <span class="attribute">visible</span>: <span class="literal">true</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">640</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">480</span></span><br><span class="line">    <span class="attribute">title</span>: qsTr(<span class="string">"求和计算器"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第一个输入框的提示文本</span></span><br><span class="line">    <span class="title">Text</span> &#123;</span><br><span class="line">        <span class="attribute">id:</span><span class="string"> textInput1</span></span><br><span class="line">        <span class="attribute">x</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">font.pixelSize</span>: <span class="number">20</span></span><br><span class="line">        <span class="attribute">anchors.verticalCenter</span>: rectangleInput1.verticalCenter</span><br><span class="line">        <span class="attribute">text</span>: <span class="string">"input 1:"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第一个输入框（通过矩形括起来显示其范围）</span></span><br><span class="line">    <span class="title">Rectangle</span> &#123;</span><br><span class="line">        <span class="attribute">id:</span><span class="string"> rectangleInput1</span></span><br><span class="line">        <span class="attribute">x</span>: <span class="number">100</span></span><br><span class="line">        <span class="attribute">y</span>: <span class="number">10</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">96</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30</span></span><br><span class="line">        <span class="attribute">border.color</span>: <span class="string">"gray"</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第一个输入框</span></span><br><span class="line">        <span class="title">TextInput</span> &#123;</span><br><span class="line">            <span class="attribute">id:</span><span class="string"> input1</span></span><br><span class="line">            <span class="attribute">anchors.verticalCenter</span>: rectangleInput1.verticalCenter</span><br><span class="line">            <span class="attribute">focus</span>: <span class="literal">false</span></span><br><span class="line">            <span class="attribute">font.pixelSize</span>: <span class="number">20</span></span><br><span class="line">            <span class="attribute">leftPadding</span>: <span class="number">5</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 通过鼠标点击来设置当前活动的输入框</span></span><br><span class="line">            <span class="title">MouseArea</span> &#123;</span><br><span class="line">                <span class="attribute">width</span>: <span class="number">96</span>;</span><br><span class="line">                <span class="attribute">height</span>: <span class="number">30</span></span><br><span class="line">                <span class="attribute">onClicked</span>: &#123;</span><br><span class="line">                    input1.focus = <span class="literal">true</span></span><br><span class="line">                    input2.focus = <span class="literal">false</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第二个输入框的提示文本</span></span><br><span class="line">    <span class="title">Text</span> &#123;</span><br><span class="line">        <span class="attribute">id:</span><span class="string"> textInput2</span></span><br><span class="line">        <span class="attribute">x</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">font.pixelSize</span>: <span class="number">20</span></span><br><span class="line">        <span class="attribute">anchors.verticalCenter</span>: rectangleInput2.verticalCenter</span><br><span class="line">        <span class="attribute">text</span>: <span class="string">"input 2:"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第二个输入框</span></span><br><span class="line">    <span class="title">Rectangle</span> &#123;</span><br><span class="line">        <span class="attribute">id:</span><span class="string"> rectangleInput2</span></span><br><span class="line">        <span class="attribute">x</span>: rectangleInput1.x</span><br><span class="line">        <span class="attribute">y</span>: rectangleInput1.y+rectangleInput1.height+<span class="number">20</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">96</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30</span></span><br><span class="line">        <span class="attribute">border.color</span>: <span class="string">"gray"</span></span><br><span class="line"></span><br><span class="line">        <span class="title">TextInput</span> &#123;</span><br><span class="line">            <span class="attribute">id:</span><span class="string"> input2</span></span><br><span class="line">            <span class="attribute">anchors.verticalCenter</span>: rectangleInput2.verticalCenter</span><br><span class="line">            <span class="attribute">focus</span>: <span class="literal">false</span></span><br><span class="line">            <span class="attribute">font.pixelSize</span>: <span class="number">20</span></span><br><span class="line">            <span class="attribute">leftPadding</span>: <span class="number">5</span></span><br><span class="line"></span><br><span class="line">            <span class="title">MouseArea</span> &#123;</span><br><span class="line">                <span class="attribute">width</span>: <span class="number">96</span>;</span><br><span class="line">                <span class="attribute">height</span>: <span class="number">30</span></span><br><span class="line">                <span class="attribute">onClicked</span>: &#123;</span><br><span class="line">                    input2.focus = <span class="literal">true</span></span><br><span class="line">                    input1.focus = <span class="literal">false</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提交输入数据的按钮</span></span><br><span class="line">    <span class="title">Button</span> &#123;</span><br><span class="line">        <span class="attribute">id:</span><span class="string"> submitButton</span></span><br><span class="line">        <span class="attribute">x</span>: rectangleInput2.x</span><br><span class="line">        <span class="attribute">y</span>: rectangleInput2.y+rectangleInput2.height+<span class="number">20</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30</span></span><br><span class="line">        <span class="attribute">font.pixelSize</span>: <span class="number">15</span></span><br><span class="line">        <span class="attribute">text</span>: <span class="string">"求和"</span></span><br><span class="line"></span><br><span class="line">        <span class="attribute">onClicked</span>: &#123;</span><br><span class="line">            client.setOperands(input1.displayText, input2.displayText);</span><br><span class="line">            result.text = client.getSumedResult()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 求和结果的提示文字</span></span><br><span class="line">    <span class="title">Text</span> &#123;</span><br><span class="line">        <span class="attribute">id:</span><span class="string"> textResult</span></span><br><span class="line">        <span class="attribute">x</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">font.pixelSize</span>: <span class="number">20</span></span><br><span class="line">        <span class="attribute">anchors.verticalCenter</span>: rectangleResult.verticalCenter</span><br><span class="line">        <span class="attribute">text</span>: <span class="string">"result:"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 求和结果的展示区域</span></span><br><span class="line">    <span class="title">Rectangle</span> &#123;</span><br><span class="line">        <span class="attribute">id:</span><span class="string"> rectangleResult</span></span><br><span class="line">        <span class="attribute">x</span>: rectangleInput2.x</span><br><span class="line">        <span class="attribute">y</span>: submitButton.y+submitButton.height+<span class="number">20</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">96</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30</span></span><br><span class="line">        <span class="attribute">border.color</span>: <span class="string">"gray"</span></span><br><span class="line">        <span class="title">Text</span> &#123;</span><br><span class="line">            <span class="attribute">id:</span><span class="string"> result</span></span><br><span class="line">            <span class="attribute">anchors.verticalCenter</span>: rectangleResult.verticalCenter</span><br><span class="line">            <span class="attribute">font.pixelSize</span>: <span class="number">20</span></span><br><span class="line">            <span class="attribute">leftPadding</span>: <span class="number">5</span></span><br><span class="line">            <span class="attribute">text</span>: <span class="string">""</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="程序运行">程序运行</h2>
<p>main.cpp文件内容如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QGuiApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QQmlApplicationEngine&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QQmlContext&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"client.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"server.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);</span><br><span class="line"></span><br><span class="line">    <span class="function">QGuiApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    QQmlApplicationEngine engine;</span><br><span class="line">    <span class="built_in">Client</span> client;</span><br><span class="line">    <span class="built_in">Server</span> server;</span><br><span class="line">    QObject::<span class="built_in">connect</span>(&amp;client, &amp;<span class="built_in">Client</span>::operandsChanged, &amp;server, &amp;<span class="built_in">Server</span>::getOperands);</span><br><span class="line">    QObject::<span class="built_in">connect</span>(&amp;server, &amp;<span class="built_in">Server</span>::resultChanged, &amp;client, &amp;<span class="built_in">Client</span>::<span class="built_in">getResult</span>);</span><br><span class="line"><span class="comment">//    client.setOperands(1,2);</span></span><br><span class="line">    engine.rootContext()-&gt;setContextProperty(<span class="string">"client"</span>, &amp;client);</span><br><span class="line">    engine.rootContext()-&gt;setContextProperty(<span class="string">"server"</span>, &amp;server);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">const</span> QUrl <span class="title">url</span><span class="params">(QStringLiteral(<span class="string">"qrc:/main.qml"</span>))</span></span>;</span><br><span class="line">    QObject::<span class="built_in">connect</span>(&amp;engine, &amp;QQmlApplicationEngine::objectCreated,</span><br><span class="line">                     &amp;app, [url](QObject *obj, <span class="keyword">const</span> QUrl &amp;objUrl) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!obj &amp;&amp; url == objUrl)</span><br><span class="line">            QCoreApplication::<span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    &#125;, Qt::QueuedConnection);</span><br><span class="line">    engine.load(url);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/22/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/Qt%E5%9F%BA%E7%A1%80/slot-signal%E6%9C%BA%E5%88%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ryan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/22/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/Qt%E5%9F%BA%E7%A1%80/slot-signal%E6%9C%BA%E5%88%B6/" itemprop="url">slot-signal机制</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-22T10:21:00+08:00">
                2020-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/" itemprop="url" rel="index">
                    <span itemprop="name">Qt</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/%E6%A0%B8%E5%BF%83%E6%9C%BA%E5%88%B6/" itemprop="url" rel="index">
                    <span itemprop="name">核心机制</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="signals-and-slots">signals and slots</h2>
<div class="figure">
<img src="/2020/05/22/5.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88/Qt/Qt%E5%9F%BA%E7%A1%80/slot-signal%E6%9C%BA%E5%88%B6/abstract-connections.png" alt="img">
<p class="caption">img</p>
</div>
<p>The signals and slots mechanism is type safe: <strong>The signature of a signal must match the signature of the receiving slot.</strong> (In fact a slot may have a shorter signature than the signal it receives because it can ignore extra arguments.)</p>
<h2 id="slot">slot</h2>
<ul>
<li>slot是一种特殊的C++类成员函数</li>
</ul>
<h2 id="signal">signal</h2>
<ul>
<li>signal可以是C++类成员函数，也可以是？</li>
</ul>
<h2 id="qt的c类与一般的c类对比">Qt的C++类与一般的C++类对比</h2>
<p>A minimal C++ class declaration might read:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Counter() &#123; m_value = <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">value</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_value; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setValue</span><span class="params">(<span class="keyword">int</span> value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m_value;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>A small <a href="https://doc.qt.io/qt-5/qobject.html" target="_blank" rel="noopener">QObject</a>-based class might read:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QObject&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> :</span> <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Counter() &#123; m_value = <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">value</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_value; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setValue</span><span class="params">(<span class="keyword">int</span> value)</span></span>;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">valueChanged</span><span class="params">(<span class="keyword">int</span> newValue)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m_value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Counter::setValue</span><span class="params">(<span class="keyword">int</span> value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value != m_value) &#123;</span><br><span class="line">        m_value = value;</span><br><span class="line">        <span class="function">emit <span class="title">valueChanged</span><span class="params">(value)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Counter a, b;</span><br><span class="line">QObject::<span class="built_in">connect</span>(&amp;a, &amp;Counter::valueChanged,</span><br><span class="line">                 &amp;b, &amp;Counter::setValue);</span><br><span class="line"></span><br><span class="line">a.setValue(<span class="number">12</span>);     <span class="comment">// a.value() == 12, b.value() == 12</span></span><br><span class="line">b.setValue(<span class="number">48</span>);     <span class="comment">// a.value() == 12, b.value() == 48</span></span><br></pre></td></tr></table></figure>
<h2 id="references">References</h2>
<ul>
<li><a href="https://doc.qt.io/qt-5/signalsandslots.html" target="_blank" rel="noopener">Signals &amp; Slots</a></li>
<li><a href="https://doc.qt.io/qt-5/qtcore-index.html" target="_blank" rel="noopener">Qt Core</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Ryan</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">33</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/liuxr98" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ryan</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>





  <script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize("");
    }
  </script>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
